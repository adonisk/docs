<!DOCTYPE html>
<html>

  

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

		<title>
			 Windows SDK 
		</title>
    
		<meta name="description" content="Integrating a windows application using Ezetap .NET sdk">
    <meta name="author" content="">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link rel="stylesheet" href="/docs/css/bootstrap.min.css">
    <link rel="stylesheet" href="/docs/css/bootstrap-theme.min.css">
    
    <!-- Custom styles -->
    <link rel="stylesheet" href="/docs/css/style.css" type="text/css" media="all">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="/docs/js/bootstrap.min.js"></script>
</head>



  <body>

    
<header class="site-header">

	<nav class="navbar navbar-default navbar-fixed-top">
  	<div class="container-fluid">
    	<!-- Brand and toggle get grouped for better mobile display -->
    	<div class="navbar-header">
      	<a class="navbar-brand" href="/docs/">
					<img alt="Brand" src="/docs/images/eze-logo-white.png">
				</a>
    	</div>

    	<!-- Collect the nav links, forms, and other content for toggling -->
    	<div class="collapse navbar-collapse navbar-inverse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
      		<li><h3><span style="color:white">Docs</span></h3></li>
				</ul>
    		<ul class="nav navbar-nav navbar-right">
					
						<li class="dropdown">
          		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" 
								aria-haspopup="true" aria-expanded="false">User Docs <span class="caret"></span></a>
							<ul class="dropdown-menu">
								
									
								
									
								
									
								
									
								
									
								
									
								
							</ul>
						</li>
					
						<li class="dropdown">
          		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" 
								aria-haspopup="true" aria-expanded="false">Client SDK <span class="caret"></span></a>
							<ul class="dropdown-menu">
								
									
								
									
								
									
								
									
        						<li><a href="/docs/pages/sdk-android-hybrid.html">Android Hybrid</a></li>
									
								
									
        						<li><a href="/docs/pages/sdk-android-native.html">Android Native</a></li>
									
								
									
        						<li><a href="/docs/pages/sdk-windows.html">Windows SDK</a></li>
									
								
							</ul>
						</li>
					
						<li class="dropdown">
          		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" 
								aria-haspopup="true" aria-expanded="false">Server API <span class="caret"></span></a>
							<ul class="dropdown-menu">
								
									
        						<li><a href="/docs/pages/api-notification.html">Notifications API</a></li>
									
								
									
								
									
								
									
								
									
								
									
								
							</ul>
						</li>
					
					<li><a href="/docs/" style="color:white"><i class="glyphicon glyphicon-home"></i> Home</a></li>
					<li>""</li>
    		</ul>
  		</div>
		</div>
	</nav>
</header>

    <div class="container container-fluid">
			<div class="row">
				<div class="col-md-1 leftnav">
				</div>
				<div class="col-md-10 page">
					<div class="page-header">
						<h1>Windows SDK&nbsp;<small>Integrating a windows application using Ezetap .NET sdk</small></h1>
					</div>
					<div class="page-content">
						<p>This section is for people who have existing windows applications (ver 7 or 8.1) running on a desktop and planning to integrate Ezetap mPoS solution using a standard windows.NET SDK.</p>

<blockquote>
  <p><strong>Note:</strong> If you are looking for a standalone mPoS solution for windows desktop or tablet, please refer to the <code>Ezetap Basic mPoS (for windows)</code> documentation</p>
</blockquote>

<h4 id="what-do-you-need-to-get-started">What do you need to get started</h4>

<pre><code>1. A Visual Studio .NET development environment
2. A Windows tablet / desktop (with a connection to internet) to test the application 
3. A DEMO merchant setup and login credentials to Ezetap service
4. Ezetap device connected to the tablet / desktop via USB
</code></pre>

<h2 id="installation-and-setup">Installation and Setup</h2>

<p>You can download the latest version of Ezetap Windows SDK here: <strong><a href="/downloads/client-sdk/windows/ezetap_windows_sdk_1_0_0.zip">ezetap_windows_sdk_1_0_0.zip</a></strong>.</p>

<blockquote>
  <p>Ezetap support team will set up and communicate with the necessary Merchant account, AppKey and other details for you.</p>
</blockquote>

<h3 id="package-components">Package Components</h3>

<p>The Ezetap Windows SDK package contains the following components.</p>

<ol>
  <li><code>ezetap_windows_pos_x_x_x.exe</code>: This self extracting executable installs a basic windows pos application as well as some core binaries required for the windows SDK to integrate Ezetap payment solution into your application.</li>
  <li><code>ezetap_windows_sdk_x_x_x.zip</code>: This zip file contains a .NET DLL along with dependent libraries. Extract this set of DLLs into a folder visible to your Visual Studio project and add them as dependent libraries in your Visual Studio project.</li>
  <li>The Ezetap Windows SDK is compatible with <code>DotNET version 4.5 or higher</code></li>
</ol>

<h3 id="visual-studio-setup">Visual Studio Setup</h3>

<p>Your windows .NET Visual Studio project should have</p>

<h2 id="api-documentation">API Documentation</h2>

<p>The primary interface to the API is through a Singleton class called <strong>EzeAPI</strong>. The following section describes the operations available on the EzeAPI for performing various payment related transactions exposed by the API.</p>

<p>The following are the operations and attributes are available for use on the EzeAPI:</p>

<pre><code>public class EzeAPI
{
	public static EzeAPI create(ServerType serverType);
	public static EzeResult login(LoginMode mode, String userName, String passkey);
}
</code></pre>

<h3 id="class-ezeapi">Class EzeAPI</h3>

<p>This section documents the operations and attributes available on the EzeAPI</p>

<h4 id="method-create">Method: Create</h4>

<pre><code>    public static EzeAPI create(ServerType serverType)
</code></pre>

<p>The first operation exposed on the API is the Create() method. It is used to create an instance of the EzeAPI object against with the other methods are invoked. EzeAPI instance can be created either in DEMO or PROD modes by passing the corresponding ServerType enum. This method returns a singleton instance of EzeAPI object, which should be stored and used to perform all other operations.</p>

<p>See the <a href="#Enumerations">Enumerations</a> section for more details on the Enums.</p>

<h4 id="method-login">Method: Login</h4>

<pre><code>    public EzeResult login(LoginMode mode, String userName, String passkey) 
</code></pre>

<p>This method is used to login to Ezetap server. It accepts the following parameters.</p>

<table>
  <thead>
    <tr>
      <th>Input Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>LoginMode</td>
      <td>This is a required field with 2 values PASSWORD or APPKEY. When LoginMode is <code>PASSWORD</code>, <em>userName</em> and <em>Passkey</em> fields are used for authenticating the individual users’ credentials against the merchant account. Only valid users in the merchant account are allowed to login. When LoginMode is <code>APPKEY</code>, the appKey registered with the merchant (<em>provided to the merchant along with Ezetap setup documentation</em>) should be passed in the <em>passKey</em> field. <em>userName</em> is not validated against the merchant, but it is stored along with the payment details for all transactoins.</td>
    </tr>
    <tr>
      <td>userName</td>
      <td>A valid userName in the merchant account</td>
    </tr>
    <tr>
      <td>passkey</td>
      <td>When <em>LoginMode</em> is <em>PASSWORD</em>, individual users’ password should be passed in this field. For <em>APPKEY</em>, the merchant’s <em>appKey</em> should be passed in this field.</td>
    </tr>
  </tbody>
</table>

<p>Please refer <a href="#EzeResult">EzeResult</a> section for the details of the response</p>

<h4 id="method-prepare-device">Method: Prepare Device</h4>

<pre><code>    public EzeResult prepareDevice() 
</code></pre>

<p>Prepare device method should be invoked to prepare the Ezetap device for card transaction. During this method call, the EzeAPI downloads specific security keys from the acquiring bank, without which the card transactions will fail. Prepare device should be called at the following instances:</p>

<ol>
  <li>Everyday when the user logs in to Ezetap API for the first time</li>
  <li>Device wakes up from sleep or startup after a shutdown</li>
</ol>

<blockquote>
  <p>Note: If the EzeAPI returns an error related to <em>device not ready</em> during postPayment() transaction, please implement an option for the user to prepare the device as needed.</p>
</blockquote>

<h4 id="method-take-payment">Method: Take Payment</h4>

<pre><code>    public EzeResult takePayment(PaymentType type, double amount, PaymentOptions options) 
</code></pre>

<p>Take payment is the primary interface for payment transactions.</p>

<h4 id="method-attach-signature">Method: Attach Signature</h4>

<pre><code>    public EzeResult attachSignature(string txnId, ImageType imageType, ByteString imageData, int height, int width, double tipAmount)
</code></pre>

<h4 id="method-set-message-handler">Method: Set Message Handler</h4>

<pre><code>    public void setMessageHandler(EzeNotification handler)
</code></pre>

<h4 id="method-logout">Method: Logout</h4>

<pre><code>    private EzeAPI logout()
</code></pre>

<p>Logout method is used to log out a user from the API. This method is used in a situation when multiple users are needing to use the API. While the API will be instantiated and continuously running, individual users will log in and out of the API using the login and logout methods. When using the APPKEY mode to login, there is no need to logout. Instead, destroy() method is recommended to be used to close down the API.</p>

<h4 id="method-destroy">Method: Destroy</h4>

<pre><code>    public static void destroy()
</code></pre>

<p>This is the last operation that should be invoked on the Ezetap SDK to destroy the EzeAPI instance. This method closes the connection to Ezetap server, relinquishes the connection to the device and gracefully exists from the API.</p>

<h3 id="class-paymentoptions">Class PaymentOptions</h3>

<pre><code>public class PaymentOptions 
{
	public PaymentOptions setOrderId(string orderId);
	public PaymentOptions setReceiptType(string receiptType);
	public PaymentOptions setChequeNo(string chequeNo);
	public PaymentOptions setBankCode(string bankCode);
	public PaymentOptions setChequeDate(String chequeDate);
}
</code></pre>

<p>The following</p>

<h3 id="class-ezeresult">Class EzeResult</h3>

<p>EzeResult is returned whenever a response is returned to the user while invoking the EzeAPI.</p>

<pre><code>public class EzeResult 
{
	public PaymentResult getPaymentResult();
    public EventName getEventName();
	public Status getStatus();
	public string getCode();
	public string getMessage();
}
</code></pre>

<p>It contains the following methods:</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>paymentResult</td>
      <td>an instance of paymentResult object that contains the details of the payment transaction</td>
    </tr>
    <tr>
      <td>eventName</td>
      <td>Enum representing the API method invoked</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Status enum representing the status of the transaction. Valid values are SUCCESS or FAILED.</td>
    </tr>
    <tr>
      <td>code</td>
      <td>Ezetap error code representing the problem</td>
    </tr>
    <tr>
      <td>message</td>
      <td>Message representing the details, in case of an error</td>
    </tr>
  </tbody>
</table>

<p>Please See <a href="#PaymentResult">PaymentResult</a> for details on paymentResult class and <a href="#Enumerations">Enumerations</a> for the different Enumerations used.</p>

<h3 id="class-paymentresult">Class PaymentResult</h3>

<p>EzeResult is returned whenever a response is returned to the user while invoking the EzeAPI.</p>

<pre><code>public class PaymentResult 
{
	public string getPmtType();
	public string getStatus();
	public string getTxnId();
	public double getAmount();
		public string getSettlementStatus();
	public bool getVoidable();
	public string getChequeNo();
	public string getChequeDate();
	public string getAuthCode();
	public string getCardType();
	public string getOrderId();
	public string getTid();
	public string getMid()
}
</code></pre>

<p>The methods available on this class and their details are given below:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pmtType</td>
      <td>Payment type of the transaction (Cash, Card or Cheque)</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Status enum representing the status of the transaction. Valid values are SUCCESS or FAILED.</td>
    </tr>
    <tr>
      <td>txnId</td>
      <td>Unique ID of the transaction</td>
    </tr>
    <tr>
      <td>amount</td>
      <td>Amount of the transaction</td>
    </tr>
    <tr>
      <td>settlementStatus</td>
      <td>Settlement status of the txn (Pending / Settled)</td>
    </tr>
    <tr>
      <td>voidable</td>
      <td>Boolean indicating whether transaction is voidable</td>
    </tr>
    <tr>
      <td>chequeNo</td>
      <td>Cheque No passed in (only for Cheque txns)</td>
    </tr>
    <tr>
      <td>chequeDate</td>
      <td>Cheque Date passed in (only for Cheque txns)</td>
    </tr>
    <tr>
      <td>authCode</td>
      <td>Auth code of the card txn</td>
    </tr>
    <tr>
      <td>cardType</td>
      <td>Card type of the card txn (Credit / Debit)</td>
    </tr>
    <tr>
      <td>orderId</td>
      <td>Order Id for the transaction, passed in by the caller during the payment transaction</td>
    </tr>
    <tr>
      <td>tid</td>
      <td>TID (Terminal Id) provided by the Bank for the specific terminal device of the merchant</td>
    </tr>
    <tr>
      <td>mid</td>
      <td>MID (Merchant Id) provided by the Bank for the merchant account</td>
    </tr>
  </tbody>
</table>

<h3 id="enumerations">Enumerations</h3>

<p>The following section documents all the enumerations that are available for use while invoking the Ezetap SDK.</p>

<h4 id="enum-servertype">Enum ServerType</h4>

<p>ServerType enum is passed while creating the EzeAPI instance. You can either pass PROD or DEMO values. This enum configures the API to either work with the production or DEMO version of the Ezetap Service.</p>

<pre><code>public enum ServerType
{
    PROD, DEMO
}
</code></pre>

<h4 id="enum-loginmode">Enum LoginMode</h4>

<p>Users can login to the EzeAPI using either username/password or APPKEY. When  using username/password, the LoginMode is set to PASSWORD and the individual user is authenticated using the users login credentials against the merchant. When using APPKEY, authentication is performed against the APPKEY present in the merchant account.</p>

<pre><code>public enum LoginMode
{
    PASSWORD, APPKEY
}
</code></pre>

<h4 id="enum-status">Enum Status</h4>

<p>Status enum is returned as part of EzeResult that indicates if a an API call was successful or failed.</p>

<pre><code>public enum Status 
{
    SUCCESS, FAILURE
}
</code></pre>

<h4 id="enum-paymenttype">Enum PaymentType</h4>

<p>PaymentType enum is passed as input to takePayment() API call and can accept CARD, CASH or CHEQUE as valid payment types</p>

<pre><code>public enum PaymentType
{
    CARD, CASH, CHEQUE
}
</code></pre>

<h4 id="enum-imagetype">Enum ImageType</h4>

<p>ImageType enum is used in the attachSignature() API call for passing eSignature data in one of the acceptable image formats.</p>

<pre><code>public enum ImageType
{
    PNG, GIF, JPEG, BMP
}
</code></pre>

<h4 id="enum-eventname">Enum EventName</h4>

<p>EventName enum is returned as part of the EzeResult object indicating the different API method calls invoked on EzeAPI</p>

<pre><code>public enum EventName
{
    LOGIN, LOGOUT, EXIT, PREPARE_DEVICE, NOTIFICATION, TAKE_PAYMENT, CREATE, SET_SERVER_TYPE, SEND_RECEIPT, ATTACH_SIGNATURE, OTHER
}
</code></pre>

					</div>
					<div class="cos-md-1 rightnav">
					</div>
				</div>
			</div>
		</div>
        <div id="footer">
      <div class="container">
        <p>&copy; 2015 
					<a href="http://www.ezetap.com" target="_blank">Ezetap Mobile Solutions Private Limited.</a>
        </p>
      </div>
    </div>


  </body>

</html>

